<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Статьи</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">

</head>
<body>

<div th:insert="~{fragments/navbar.html :: navbar}" ></div>
<div th:insert="~{fragments/menu.html :: menu}" ></div>
<div class="container mt-5">
    <a th:href="@{/admin/article/fetch(page=${page}, status=${status})}" class="btn btn-primary btn-lg">
        <i class="fas fa-arrow-left"></i> Назад
    </a>
</div>
<div class=" container" style="display: flex; justify-content: flex-end;flex-direction: row; align-items: center">

        <form th:action="@{/admin/article/del}" method="post" style="margin-right: 30px">
            <input type="hidden" name="id" th:value="${article.getId()}"/>
            <input type="hidden" name="status" th:value="${status}"/>
            <input type="hidden" name="page" th:value="${page}"/>
            <button class="btn btn-danger" type="submit">Удалить</button>
        </form>

        <form th:action="@{/admin/article/status}" method="post" modelAttribute="articleStatus">
            <input type="hidden" name="id" th:value="${article.getId()}"/>
            <div th:if="${status == 'MODERATION'}">
                <select name="status" onchange="this.form.submit()">
                    <option value="">Выберите действие</option>
                    <option value="PUBLISH">Опубликовать</option>
                    <option value="BLOCK">Заблокировать</option>
                </select>
            </div>
            <div th:if="${status == 'PUBLISH'}">
                <select name="status" onchange="this.form.submit()">
                    <option value="">Выберите действие</option>
                    <option value="MODERATION">На модерацию</option>
                    <option value="BLOCK">Заблокировать</option>
                </select>
            </div>
            <div th:if="${status == 'BLOCK'}">
                <select name="status" onchange="this.form.submit()">
                    <option value="">Выберите действие</option>
                    <option value="PUBLISH">Опубликовать</option>
                    <option value="MODERATION">На модерацию</option>
                </select>
            </div>
            <input type="hidden" name="page" th:value="${page}"/>
        </form>


</div>
<div class="container mt-4">
    <div>
        <h1 th:text="${article.theme}">Article Theme</h1>
        <p><strong>Created:</strong> <span th:text="${#dates.format(article.created, 'dd-MM-yyyy HH:mm:ss')}">01-01-2022 00:00:00</span></p>
        <p><strong>User:</strong> <span th:text="${article.userDto.login}">Username</span></p>
        <p><strong>Likes:</strong> <span th:text="${article.likes}">0</span></p>
        <p><strong>Dislikes:</strong> <span th:text="${article.dislikes}">0</span></p>
        <p><strong>Comments:</strong> <span th:text="${article.commentsCount}">0</span></p>
        <div>
            <strong>Hub:</strong>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>RU</th>
                    <th>EN</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td th:text="${hub.id}">1</td>
                    <td th:text="${hub.ru}">русский</td>
                    <td th:text="${hub.en}">english</td>
                </tr>
                </tbody>
            </table>
        </div>
        <p><strong>Like State:</strong> <span th:text="${article.likeState}">0</span></p>
        <div>
            <strong>Keywords:</strong>
            <ul>
                <li th:each="keyword : ${article.keyWords}" th:text="${keyword}">Keyword</li>
            </ul>
        </div>
        <div>
            <div th:each="part : ${article.list}">
                <div th:if="${part.type == 'paragraph'}">
                    <p th:text="${part.getValue()}">Part Content</p>
                </div>
                <div th:if="${part.type == 'img'}">
                    <img th:src="${part.getValue()}" alt="Image Content"/>
                </div>
                <div th:if="${part.type == 'chapter'}">
                    <h3 th:text="${part.getValue()}">Part Title</h3>

                </div>
            </div>

        </div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>